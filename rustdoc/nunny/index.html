<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The definitive non-empty slice/array/vec library for Rust."><title>nunny - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="nunny" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.0 (051478957 2024-07-21)" data-channel="1.80.0" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../nunny/index.html">nunny</a><span class="version">0.2.1</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#types">Type Aliases</a></li></ul></section></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">nunny</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/nunny/lib.rs.html#1-404">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The definitive non-empty slice/array/vec library for Rust.</p>
<h2 id="features"><a class="doc-anchor" href="#features">§</a>Features</h2>
<p>Nonempty-by-construction API</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span><span class="kw-2">mut </span>my_vec = NonEmpty::&lt;Vec&lt;<span class="kw">_</span>&gt;&gt;::of(<span class="string">"hello"</span>); <span class="comment">// construct once
</span>my_vec.push(<span class="string">"world"</span>);                             <span class="comment">// continue using your normal APIs
</span><span class="kw">let </span>hello: <span class="kw-2">&amp;</span>str = my_vec.first();                 <span class="comment">// preserve the guarantee that there is at least one element</span></code></pre></div>
<p><code>#[repr(transparent)]</code> allows advanced usecases and guarantees optimum performance<sup id="fnref1"><a href="#fn1">1</a></sup>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>src = <span class="kw-2">&amp;mut </span>[<span class="string">"hello"</span>, <span class="string">"world"</span>];
<span class="kw">let </span>ne = NonEmpty::&lt;[<span class="kw">_</span>]&gt;::new_mut(src).unwrap();
<span class="comment">//  ^ uses the same backing memory
</span><span class="kw">let </span>world: <span class="kw-2">&amp;</span>str = ne.last();</code></pre></div>
<p>Total API coverage.
For every impl of <a href="https://doc.rust-lang.org/1.80.0/core/convert/trait.From.html" title="trait core::convert::From"><code>From</code></a>, <a href="https://doc.rust-lang.org/1.80.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom"><code>TryFrom</code></a>, <a href="https://doc.rust-lang.org/1.80.0/core/cmp/trait.PartialEq.html" title="trait core::cmp::PartialEq"><code>PartialEq</code></a> and <a href="https://doc.rust-lang.org/1.80.0/core/cmp/trait.PartialOrd.html" title="trait core::cmp::PartialOrd"><code>PartialOrd</code></a> in <a href="https://doc.rust-lang.org/1.80.0/std/index.html" title="mod std"><code>std</code></a><sup id="fnref2"><a href="#fn2">2</a></sup>,
there is a corresponding impl in this library for <a href="type.Slice.html" title="type nunny::Slice"><code>Slice</code></a>, <a href="type.Array.html" title="type nunny::Array"><code>Array</code></a> and <a href="type.Vec.html" title="type nunny::Vec"><code>Vec</code></a>.
<em>This includes more exotic types</em>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>nun: Box&lt;NonEmpty&lt;[<span class="kw">_</span>]&gt;&gt; = <span class="macro">vec!</span>[<span class="number">0xDEAD</span>, <span class="number">0xBEEF</span>].into();
<span class="kw">let </span>cow: Cow&lt;NonEmpty&lt;[<span class="kw">_</span>]&gt;&gt; = (<span class="kw-2">&amp;*</span>nun).into();
<span class="kw">let </span>arc: Arc&lt;NonEmpty&lt;[<span class="kw">_</span>]&gt;&gt; = cow.into_owned().into();</code></pre></div>
<p><code>const</code>-friendly API. Where possible, all methods are <code>const</code>.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">const </span>TWO: <span class="kw-2">&amp;</span>NonEmpty&lt;[<span class="kw-2">&amp;</span>str]&gt; = <span class="macro">slice!</span>[<span class="string">"together"</span>, <span class="string">"forever"</span>];
<span class="kw">const </span>FIRST: <span class="kw-2">&amp;</span>str = TWO.first();
<span class="kw">const </span>ONE: <span class="kw-2">&amp;</span>NonEmpty&lt;[<span class="kw-2">&amp;</span>str]&gt; = NonEmpty::&lt;[<span class="kw">_</span>]&gt;::of(<span class="kw-2">&amp;</span><span class="string">"lonely"</span>);</code></pre></div>
<p>Extensive feature gating supporting:</p>
<ul>
<li><code>no-std</code> environments with no allocator.</li>
<li><code>alloc</code>-enabled environments.</li>
<li>full-<code>std</code>-enabled environments.</li>
<li>interaction with crates like <a href="../serde/index.html" title="mod serde"><code>serde</code></a> and <a href="::arbitrary1"><code>arbitrary</code></a>.</li>
</ul>
<p>Iterator support:
Specialized <a href="https://doc.rust-lang.org/1.80.0/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator"><code>Iterator</code></a> methods remove branches to handle empty iterators,
<em>and</em> preserve invariants even when chaining combinators.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>v = <span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];
<span class="kw">let _</span>: <span class="prelude-ty">Option</span>&lt;<span class="kw-2">&amp;</span>u8&gt; = v.iter().last();
    <span class="comment">// ^ normally you have to handle the empty case
</span><span class="kw">let _</span>: <span class="kw-2">&amp;</span>u8 = v.iter_ne().last();
    <span class="comment">// ^ but we know there is at least one element
</span><span class="kw">let _</span>: u8 = v.iter_ne().copied().last();
                     <span class="comment">// ^ using this combinator preserves the invariant</span></code></pre></div>
<p>Thoughtful design:</p>
<ul>
<li><a href="https://doc.rust-lang.org/1.80.0/core/num/nonzero/type.NonZeroUsize.html" title="type core::num::nonzero::NonZeroUsize"><code>NonZeroUsize</code></a> is inserted <a href="Slice::len">where</a> <a href="struct.NonEmpty.html#method.truncate" title="method nunny::NonEmpty::truncate">appropriate</a>.</li>
<li>Everything <a href="https://doc.rust-lang.org/1.80.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref"><code>Deref</code></a>/<a href="https://doc.rust-lang.org/1.80.0/core/ops/deref/trait.DerefMut.html" title="trait core::ops::deref::DerefMut"><code>DerefMut</code></a>s
down to a <a href="struct.NonEmpty.html" title="struct nunny::NonEmpty"><code>NonEmpty&lt;Slice&lt;T&gt;&gt;</code></a>, which in turn <code>deref/mut</code>s down to a <code>[T]</code>.</li>
<li>Liberal applications of <a href="https://doc.rust-lang.org/1.80.0/core/cmp/index.html" title="mod core::cmp"><code>cmp</code></a>, <a href="https://doc.rust-lang.org/1.80.0/core/borrow/index.html" title="mod core::borrow"><code>borrow</code></a>, <a href="https://doc.rust-lang.org/1.80.0/core/convert/index.html" title="mod core::convert"><code>convert</code></a>
traits.
If there’s a missing API that you’d like, please raise an issue!</li>
</ul>
<div class="footnotes"><hr><ol><li id="fn1"><p>Other crates like <a href="https://docs.rs/nonempty/latest/nonempty/struct.NonEmpty.html"><code>nonempty</code></a>
require an indirection.
&nbsp;<a href="#fnref1">↩</a></p></li><li id="fn2"><p>Barring impls on <code>!#[fundamental]</code> types like <a href="std::sync::Arc"><code>Arc</code></a>.
Fun fact: our tests were generated from <a href="https://doc.rust-lang.org/1.80.0/std/index.html" title="mod std"><code>std</code></a>’s rustdoc!&nbsp;<a href="#fnref2">↩</a></p></li></ol></div></div></details><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.array.html" title="macro nunny::array">array</a></div><div class="desc docblock-short">Create a non-empty array</div></li><li><div class="item-name"><a class="macro" href="macro.slice.html" title="macro nunny::slice">slice</a></div><div class="desc docblock-short">Create a non-empty slice</div></li><li><div class="item-name"><a class="macro" href="macro.vec.html" title="macro nunny::vec">vec</a></div><div class="desc docblock-short">Create a non-empty heap-allocated vector</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Error.html" title="struct nunny::Error">Error</a></div><div class="desc docblock-short">Error returned in <a href="https://doc.rust-lang.org/1.80.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom"><code>TryFrom</code></a> implementations for reference conversions.</div></li><li><div class="item-name"><a class="struct" href="struct.NonEmpty.html" title="struct nunny::NonEmpty">NonEmpty</a></div><div class="desc docblock-short">A wrapper struct around non-empty slices/arrays/vectors.</div></li><li><div class="item-name"><a class="struct" href="struct.TryFromSliceError.html" title="struct nunny::TryFromSliceError">TryFromSliceError</a></div><div class="desc docblock-short">Error returned in <a href="https://doc.rust-lang.org/1.80.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom"><code>TryFrom</code></a> implementations for reference conversions.</div></li></ul><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.Array.html" title="type nunny::Array">Array</a></div><div class="desc docblock-short">A non-empty <a href="https://doc.rust-lang.org/1.80.0/std/primitive.array.html" title="primitive array">array</a> of known size.</div></li><li><div class="item-name"><a class="type" href="type.Slice.html" title="type nunny::Slice">Slice</a></div><div class="desc docblock-short">A non-empty, dynamically sized <a href="https://doc.rust-lang.org/1.80.0/std/primitive.slice.html" title="primitive slice">slice</a>.</div></li><li><div class="item-name"><a class="type" href="type.Vec.html" title="type nunny::Vec">Vec</a></div><div class="desc docblock-short">A non-empty, heap allocated <a href="https://doc.rust-lang.org/1.80.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>.</div></li></ul></section></div></main></body></html>