<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Information about the networking layer."><title>procfs::net - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-5bc39a1768837dd0.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="procfs" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.0 (aedd173a2 2024-03-17)" data-channel="1.77.0" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-4c98445ec4002617.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-48f368f3872407c8.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../procfs/index.html">procfs</a><span class="version">0.16.0</span></h2></div><h2 class="location"><a href="#">Module net</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></section><h2><a href="../index.html">In crate procfs</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../procfs/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">procfs</a>::<wbr><a class="mod" href="#">net</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/procfs/net.rs.html#3-251">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Information about the networking layer.</p>
<p>This module corresponds to the <code>/proc/net</code> directory and contains various information about the
networking layer.</p>
<h2 id="example"><a class="doc-anchor" href="#example">§</a>Example</h2>
<p>Here’s an example that will print out all of the open and listening TCP sockets, and their
corresponding processes, if know.  This mimics the “netstat” utility, but for TCP only.  You
can run this example yourself with:</p>
<blockquote>
<p>cargo run –example=netstat</p>
</blockquote>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>all_procs = procfs::process::all_processes().unwrap();

<span class="comment">// build up a map between socket inodes and process stat info:
</span><span class="kw">let </span><span class="kw-2">mut </span>map: HashMap&lt;u64, Stat&gt; = HashMap::new();
<span class="kw">for </span>p <span class="kw">in </span>all_procs {
    <span class="kw">let </span>process = p.unwrap();
    <span class="kw">if let </span>(<span class="prelude-val">Ok</span>(stat), <span class="prelude-val">Ok</span>(fds)) = (process.stat(), process.fd()) {
        <span class="kw">for </span>fd <span class="kw">in </span>fds {
            <span class="kw">if let </span>FDTarget::Socket(inode) = fd.unwrap().target {
                map.insert(inode, stat.clone());
            }
        }
    }
}

<span class="comment">// get the tcp table
</span><span class="kw">let </span>tcp = procfs::net::tcp().unwrap();
<span class="kw">let </span>tcp6 = procfs::net::tcp6().unwrap();
<span class="macro">println!</span>(<span class="string">"{:&lt;26} {:&lt;26} {:&lt;15} {:&lt;8} {}"</span>, <span class="string">"Local address"</span>, <span class="string">"Remote address"</span>, <span class="string">"State"</span>, <span class="string">"Inode"</span>, <span class="string">"PID/Program name"</span>);
<span class="kw">for </span>entry <span class="kw">in </span>tcp.into_iter().chain(tcp6) {
    <span class="comment">// find the process (if any) that has an open FD to this entry's inode
    </span><span class="kw">let </span>local_address = <span class="macro">format!</span>(<span class="string">"{}"</span>, entry.local_address);
    <span class="kw">let </span>remote_addr = <span class="macro">format!</span>(<span class="string">"{}"</span>, entry.remote_address);
    <span class="kw">let </span>state = <span class="macro">format!</span>(<span class="string">"{:?}"</span>, entry.state);
    <span class="kw">if let </span><span class="prelude-val">Some</span>(stat) = map.get(<span class="kw-2">&amp;</span>entry.inode) {
        <span class="macro">println!</span>(<span class="string">"{:&lt;26} {:&lt;26} {:&lt;15} {:&lt;12} {}/{}"</span>, local_address, remote_addr, state, entry.inode, stat.pid, stat.comm);
    } <span class="kw">else </span>{
        <span class="comment">// We might not always be able to find the process associated with this socket
        </span><span class="macro">println!</span>(<span class="string">"{:&lt;26} {:&lt;26} {:&lt;15} {:&lt;12} -"</span>, local_address, remote_addr, state, entry.inode);
    }
}</code></pre></div>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ARPEntry.html" title="struct procfs::net::ARPEntry">ARPEntry</a></div><div class="desc docblock-short">An entry in the ARP table</div></li><li><div class="item-name"><a class="struct" href="struct.ARPFlags.html" title="struct procfs::net::ARPFlags">ARPFlags</a></div><div class="desc docblock-short">Flags for ARP entries</div></li><li><div class="item-name"><a class="struct" href="struct.ARPHardware.html" title="struct procfs::net::ARPHardware">ARPHardware</a></div><div class="desc docblock-short">Hardware type for an ARP table entry.</div></li><li><div class="item-name"><a class="struct" href="struct.ArpEntries.html" title="struct procfs::net::ArpEntries">ArpEntries</a></div><div class="desc docblock-short">ARP table entries.</div></li><li><div class="item-name"><a class="struct" href="struct.DeviceStatus.html" title="struct procfs::net::DeviceStatus">DeviceStatus</a></div><div class="desc docblock-short">General statistics for a network interface/device</div></li><li><div class="item-name"><a class="struct" href="struct.InterfaceDeviceStatus.html" title="struct procfs::net::InterfaceDeviceStatus">InterfaceDeviceStatus</a></div><div class="desc docblock-short">Device status information for all network interfaces.</div></li><li><div class="item-name"><a class="struct" href="struct.RouteEntries.html" title="struct procfs::net::RouteEntries">RouteEntries</a></div><div class="desc docblock-short">A set of ipv4 routes.</div></li><li><div class="item-name"><a class="struct" href="struct.RouteEntry.html" title="struct procfs::net::RouteEntry">RouteEntry</a></div><div class="desc docblock-short">An entry in the ipv4 route table</div></li><li><div class="item-name"><a class="struct" href="struct.Snmp.html" title="struct procfs::net::Snmp">Snmp</a></div><div class="desc docblock-short">This struct holds the data needed for the IP, ICMP, TCP, and UDP management
information bases for an SNMP agent.</div></li><li><div class="item-name"><a class="struct" href="struct.Snmp6.html" title="struct procfs::net::Snmp6">Snmp6</a></div><div class="desc docblock-short">This struct holds the data needed for the IP, ICMP, TCP, and UDP management
information bases for an SNMP agent.</div></li><li><div class="item-name"><a class="struct" href="struct.TcpNetEntries.html" title="struct procfs::net::TcpNetEntries">TcpNetEntries</a></div><div class="desc docblock-short">TCP socket entries.</div></li><li><div class="item-name"><a class="struct" href="struct.TcpNetEntry.html" title="struct procfs::net::TcpNetEntry">TcpNetEntry</a></div><div class="desc docblock-short">An entry in the TCP socket table</div></li><li><div class="item-name"><a class="struct" href="struct.UdpNetEntries.html" title="struct procfs::net::UdpNetEntries">UdpNetEntries</a></div><div class="desc docblock-short">UDP socket entries.</div></li><li><div class="item-name"><a class="struct" href="struct.UdpNetEntry.html" title="struct procfs::net::UdpNetEntry">UdpNetEntry</a></div><div class="desc docblock-short">An entry in the UDP socket table</div></li><li><div class="item-name"><a class="struct" href="struct.UnixNetEntries.html" title="struct procfs::net::UnixNetEntries">UnixNetEntries</a></div><div class="desc docblock-short">Unix socket entries.</div></li><li><div class="item-name"><a class="struct" href="struct.UnixNetEntry.html" title="struct procfs::net::UnixNetEntry">UnixNetEntry</a></div><div class="desc docblock-short">An entry in the Unix socket table</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.IpForwarding.html" title="enum procfs::net::IpForwarding">IpForwarding</a></div><div class="desc docblock-short">The indication of whether this entity is acting as an IP gateway in respect
to the forwarding of datagrams received by, but not addressed to, this
entity.  IP gateways forward datagrams.  IP hosts do not (except those
source-routed via the host).</div></li><li><div class="item-name"><a class="enum" href="enum.TcpRtoAlgorithm.html" title="enum procfs::net::TcpRtoAlgorithm">TcpRtoAlgorithm</a></div><div class="desc docblock-short">The algorithm used to determine the timeout value used for retransmitting
unacknowledged octets.</div></li><li><div class="item-name"><a class="enum" href="enum.TcpState.html" title="enum procfs::net::TcpState">TcpState</a></div></li><li><div class="item-name"><a class="enum" href="enum.UdpState.html" title="enum procfs::net::UdpState">UdpState</a></div></li><li><div class="item-name"><a class="enum" href="enum.UnixState.html" title="enum procfs::net::UnixState">UnixState</a></div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.arp.html" title="fn procfs::net::arp">arp</a></div><div class="desc docblock-short">Reads the ARP table</div></li><li><div class="item-name"><a class="fn" href="fn.dev_status.html" title="fn procfs::net::dev_status">dev_status</a></div><div class="desc docblock-short">Returns basic network device statistics for all interfaces</div></li><li><div class="item-name"><a class="fn" href="fn.route.html" title="fn procfs::net::route">route</a></div><div class="desc docblock-short">Reads the ipv4 route table</div></li><li><div class="item-name"><a class="fn" href="fn.snmp.html" title="fn procfs::net::snmp">snmp</a></div><div class="desc docblock-short">Reads the network management information by Simple Network Management Protocol</div></li><li><div class="item-name"><a class="fn" href="fn.snmp6.html" title="fn procfs::net::snmp6">snmp6</a></div><div class="desc docblock-short">Reads the network management information of IPv6 by Simple Network Management Protocol</div></li><li><div class="item-name"><a class="fn" href="fn.tcp.html" title="fn procfs::net::tcp">tcp</a></div><div class="desc docblock-short">Reads the tcp socket table</div></li><li><div class="item-name"><a class="fn" href="fn.tcp6.html" title="fn procfs::net::tcp6">tcp6</a></div><div class="desc docblock-short">Reads the tcp6 socket table</div></li><li><div class="item-name"><a class="fn" href="fn.udp.html" title="fn procfs::net::udp">udp</a></div><div class="desc docblock-short">Reads the udp socket table</div></li><li><div class="item-name"><a class="fn" href="fn.udp6.html" title="fn procfs::net::udp6">udp6</a></div><div class="desc docblock-short">Reads the udp6 socket table</div></li><li><div class="item-name"><a class="fn" href="fn.unix.html" title="fn procfs::net::unix">unix</a></div><div class="desc docblock-short">Reads the unix socket table</div></li></ul></section></div></main></body></html>