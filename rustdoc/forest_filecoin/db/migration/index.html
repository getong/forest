<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `migration` mod in crate `forest_filecoin`."><title>forest_filecoin::db::migration - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="forest_filecoin" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.0 (051478957 2024-07-21)" data-channel="1.80.0" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../forest_filecoin/index.html">forest_filecoin</a><span class="version">0.19.2</span></h2></div><h2 class="location"><a href="#">Module migration</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li></ul></section><h2><a href="../index.html">In forest_filecoin::db</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../index.html">forest_filecoin</a>::<wbr><a href="../index.html">db</a>::<wbr><a class="mod" href="#">migration</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../../src/forest_filecoin/db/migration/mod.rs.html#4-11">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.DbMigration"><code>pub use db_migration::<a class="struct" href="db_migration/struct.DbMigration.html" title="struct forest_filecoin::db::migration::db_migration::DbMigration">DbMigration</a>;</code></div></li></ul><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="db_migration/index.html" title="mod forest_filecoin::db::migration::db_migration">db_migration</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="mod" href="migration_map/index.html" title="mod forest_filecoin::db::migration::migration_map">migration_map</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="mod" href="v0_12_1/index.html" title="mod forest_filecoin::db::migration::v0_12_1">v0_12_1</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Migration logic from version 0.12.1
This is more of an exercise and a PoC than a real migration, the reason being that the
database directories before the Forest version 0.12.1 were not yet versioned and so we can only guess the version
of their underlying databases.
All in all, it gives us a good idea of how to do a migration and solves potential caveats
coming from the rolling database and ParityDb.</div></li><li><div class="item-name"><a class="mod" href="v0_16_0/index.html" title="mod forest_filecoin::db::migration::v0_16_0">v0_16_0</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Migration logic for 0.15.2 to 0.16.0 version.
We are getting rid of rolling db in favor of mark-and-sweep GC. Therefore the two databases
previously representing node state have to be merged into a new one and removed.</div></li><li><div class="item-name"><a class="mod" href="v0_19_0/index.html" title="mod forest_filecoin::db::migration::v0_19_0">v0_19_0</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Migration logic for 0.18.0 to 0.19.0 version.
For the need for Ethereum RPC API, a new column in parity-db has been introduced to handle
mapping of values such as, <code>Hash</code> to <code>TipsetKey</code> and <code>Hash</code> to message <code>Cid</code>.</div></li><li><div class="item-name"><a class="mod" href="void_migration/index.html" title="mod forest_filecoin::db::migration::void_migration">void_migration</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Migration logic from any version that requires no migration logic.</div></li></ul></section></div></main></body></html>