<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `FilecoinKernel` trait in crate `fvm`."><title>FilecoinKernel in fvm::kernel::filecoin - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-081576b923113409.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="fvm" data-themes="" data-resource-suffix="" data-rustdoc-version="1.79.0 (129f3b996 2024-06-10)" data-channel="1.79.0" data-search-js="search-bf21c90c8c1d92b1.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../static.files/storage-e32f0c247825364d.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-09095024cf37855e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../fvm/index.html">fvm</a><span class="version">4.3.0</span></h2></div><h2 class="location"><a href="#">FilecoinKernel</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.batch_verify_seals">batch_verify_seals</a></li><li><a href="#tymethod.compute_unsealed_sector_cid">compute_unsealed_sector_cid</a></li><li><a href="#tymethod.total_fil_circ_supply">total_fil_circ_supply</a></li><li><a href="#tymethod.verify_aggregate_seals">verify_aggregate_seals</a></li><li><a href="#tymethod.verify_consensus_fault">verify_consensus_fault</a></li><li><a href="#tymethod.verify_post">verify_post</a></li><li><a href="#tymethod.verify_replica_update">verify_replica_update</a></li></ul><h3><a href="#object-safety">Object Safety</a></h3><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In fvm::kernel::filecoin</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../../fvm/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Type ‘S’ or ‘/’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings">Settings</a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../../index.html">fvm</a>::<wbr><a href="../index.html">kernel</a>::<wbr><a href="index.html">filecoin</a>::<wbr><a class="trait" href="#">FilecoinKernel</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../../src/fvm/kernel/filecoin.rs.html#38-89">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait FilecoinKernel: <a class="trait" href="../trait.Kernel.html" title="trait fvm::kernel::Kernel">Kernel</a> {
    // Required methods
    fn <a href="#tymethod.compute_unsealed_sector_cid" class="fn">compute_unsealed_sector_cid</a>(
        &amp;self,
        proof_type: <a class="enum" href="../../../fvm_shared/sector/registered_proof/enum.RegisteredSealProof.html" title="enum fvm_shared::sector::registered_proof::RegisteredSealProof">RegisteredSealProof</a>,
        pieces: &amp;[<a class="struct" href="../../../fvm_shared/piece/struct.PieceInfo.html" title="struct fvm_shared::piece::PieceInfo">PieceInfo</a>]
    ) -&gt; <a class="type" href="../type.Result.html" title="type fvm::kernel::Result">Result</a>&lt;<a class="type" href="../prelude/type.Cid.html" title="type fvm::kernel::prelude::Cid">Cid</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.verify_post" class="fn">verify_post</a>(&amp;self, verify_info: &amp;<a class="struct" href="../../../fvm_shared/sector/post/struct.WindowPoStVerifyInfo.html" title="struct fvm_shared::sector::post::WindowPoStVerifyInfo">WindowPoStVerifyInfo</a>) -&gt; <a class="type" href="../type.Result.html" title="type fvm::kernel::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.79.0/std/primitive.bool.html">bool</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.verify_consensus_fault" class="fn">verify_consensus_fault</a>(
        &amp;self,
        h1: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.79.0/std/primitive.u8.html">u8</a>],
        h2: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.79.0/std/primitive.u8.html">u8</a>],
        extra: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.79.0/std/primitive.u8.html">u8</a>]
    ) -&gt; <a class="type" href="../type.Result.html" title="type fvm::kernel::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.79.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../fvm_shared/consensus/struct.ConsensusFault.html" title="struct fvm_shared::consensus::ConsensusFault">ConsensusFault</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.batch_verify_seals" class="fn">batch_verify_seals</a>(&amp;self, vis: &amp;[<a class="struct" href="../../../fvm_shared/sector/seal/struct.SealVerifyInfo.html" title="struct fvm_shared::sector::seal::SealVerifyInfo">SealVerifyInfo</a>]) -&gt; <a class="type" href="../type.Result.html" title="type fvm::kernel::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.79.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.79.0/std/primitive.bool.html">bool</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.verify_aggregate_seals" class="fn">verify_aggregate_seals</a>(
        &amp;self,
        aggregate: &amp;<a class="struct" href="../../../fvm_shared/sector/seal/struct.AggregateSealVerifyProofAndInfos.html" title="struct fvm_shared::sector::seal::AggregateSealVerifyProofAndInfos">AggregateSealVerifyProofAndInfos</a>
    ) -&gt; <a class="type" href="../type.Result.html" title="type fvm::kernel::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.79.0/std/primitive.bool.html">bool</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.verify_replica_update" class="fn">verify_replica_update</a>(&amp;self, replica: &amp;<a class="struct" href="../../../fvm_shared/sector/seal/struct.ReplicaUpdateInfo.html" title="struct fvm_shared::sector::seal::ReplicaUpdateInfo">ReplicaUpdateInfo</a>) -&gt; <a class="type" href="../type.Result.html" title="type fvm::kernel::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.79.0/std/primitive.bool.html">bool</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.total_fil_circ_supply" class="fn">total_fil_circ_supply</a>(&amp;self) -&gt; <a class="type" href="../type.Result.html" title="type fvm::kernel::Result">Result</a>&lt;<a class="struct" href="../prelude/struct.TokenAmount.html" title="struct fvm::kernel::prelude::TokenAmount">TokenAmount</a>&gt;;
}</code></pre><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.compute_unsealed_sector_cid" class="method"><a class="src rightside" href="../../../src/fvm/kernel/filecoin.rs.html#40-44">source</a><h4 class="code-header">fn <a href="#tymethod.compute_unsealed_sector_cid" class="fn">compute_unsealed_sector_cid</a>(
    &amp;self,
    proof_type: <a class="enum" href="../../../fvm_shared/sector/registered_proof/enum.RegisteredSealProof.html" title="enum fvm_shared::sector::registered_proof::RegisteredSealProof">RegisteredSealProof</a>,
    pieces: &amp;[<a class="struct" href="../../../fvm_shared/piece/struct.PieceInfo.html" title="struct fvm_shared::piece::PieceInfo">PieceInfo</a>]
) -&gt; <a class="type" href="../type.Result.html" title="type fvm::kernel::Result">Result</a>&lt;<a class="type" href="../prelude/type.Cid.html" title="type fvm::kernel::prelude::Cid">Cid</a>&gt;</h4></section></summary><div class="docblock"><p>Computes an unsealed sector CID (CommD) from its constituent piece CIDs (CommPs) and sizes.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.verify_post" class="method"><a class="src rightside" href="../../../src/fvm/kernel/filecoin.rs.html#47">source</a><h4 class="code-header">fn <a href="#tymethod.verify_post" class="fn">verify_post</a>(&amp;self, verify_info: &amp;<a class="struct" href="../../../fvm_shared/sector/post/struct.WindowPoStVerifyInfo.html" title="struct fvm_shared::sector::post::WindowPoStVerifyInfo">WindowPoStVerifyInfo</a>) -&gt; <a class="type" href="../type.Result.html" title="type fvm::kernel::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.79.0/std/primitive.bool.html">bool</a>&gt;</h4></section></summary><div class="docblock"><p>Verifies a window proof of spacetime.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.verify_consensus_fault" class="method"><a class="src rightside" href="../../../src/fvm/kernel/filecoin.rs.html#59-64">source</a><h4 class="code-header">fn <a href="#tymethod.verify_consensus_fault" class="fn">verify_consensus_fault</a>(
    &amp;self,
    h1: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.79.0/std/primitive.u8.html">u8</a>],
    h2: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.79.0/std/primitive.u8.html">u8</a>],
    extra: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.79.0/std/primitive.u8.html">u8</a>]
) -&gt; <a class="type" href="../type.Result.html" title="type fvm::kernel::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.79.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../fvm_shared/consensus/struct.ConsensusFault.html" title="struct fvm_shared::consensus::ConsensusFault">ConsensusFault</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Verifies that two block headers provide proof of a consensus fault:</p>
<ul>
<li>both headers mined by the same actor</li>
<li>headers are different</li>
<li>first header is of the same or lower epoch as the second</li>
<li>at least one of the headers appears in the current chain at or after epoch <code>earliest</code></li>
<li>the headers provide evidence of a fault (see the spec for the different fault types).
The parameters are all serialized block headers. The third “extra” parameter is consulted only for
the “parent grinding fault”, in which case it must be the sibling of h1 (same parent tipset) and one of the
blocks in the parent of h2 (i.e. h2’s grandparent).
Returns nil and an error if the headers don’t prove a fault.</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.batch_verify_seals" class="method"><a class="src rightside" href="../../../src/fvm/kernel/filecoin.rs.html#71">source</a><h4 class="code-header">fn <a href="#tymethod.batch_verify_seals" class="fn">batch_verify_seals</a>(&amp;self, vis: &amp;[<a class="struct" href="../../../fvm_shared/sector/seal/struct.SealVerifyInfo.html" title="struct fvm_shared::sector::seal::SealVerifyInfo">SealVerifyInfo</a>]) -&gt; <a class="type" href="../type.Result.html" title="type fvm::kernel::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.79.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.79.0/std/primitive.bool.html">bool</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Verifies a batch of seals. This is a privledged syscall, may <em>only</em> be called by the
power actor during cron.</p>
<p>Gas: This syscall intentionally <em>does not</em> charge any gas (as said gas would be charged to
cron). Instead, gas is pre-paid by the storage provider on pre-commit.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.verify_aggregate_seals" class="method"><a class="src rightside" href="../../../src/fvm/kernel/filecoin.rs.html#74">source</a><h4 class="code-header">fn <a href="#tymethod.verify_aggregate_seals" class="fn">verify_aggregate_seals</a>(
    &amp;self,
    aggregate: &amp;<a class="struct" href="../../../fvm_shared/sector/seal/struct.AggregateSealVerifyProofAndInfos.html" title="struct fvm_shared::sector::seal::AggregateSealVerifyProofAndInfos">AggregateSealVerifyProofAndInfos</a>
) -&gt; <a class="type" href="../type.Result.html" title="type fvm::kernel::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.79.0/std/primitive.bool.html">bool</a>&gt;</h4></section></summary><div class="docblock"><p>Verify aggregate seals verifies an aggregated batch of prove-commits.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.verify_replica_update" class="method"><a class="src rightside" href="../../../src/fvm/kernel/filecoin.rs.html#78">source</a><h4 class="code-header">fn <a href="#tymethod.verify_replica_update" class="fn">verify_replica_update</a>(&amp;self, replica: &amp;<a class="struct" href="../../../fvm_shared/sector/seal/struct.ReplicaUpdateInfo.html" title="struct fvm_shared::sector::seal::ReplicaUpdateInfo">ReplicaUpdateInfo</a>) -&gt; <a class="type" href="../type.Result.html" title="type fvm::kernel::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.79.0/std/primitive.bool.html">bool</a>&gt;</h4></section></summary><div class="docblock"><p>Verify replica update verifies a snap deal: an upgrade from a CC sector to a sector with
deals.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.total_fil_circ_supply" class="method"><a class="src rightside" href="../../../src/fvm/kernel/filecoin.rs.html#88">source</a><h4 class="code-header">fn <a href="#tymethod.total_fil_circ_supply" class="fn">total_fil_circ_supply</a>(&amp;self) -&gt; <a class="type" href="../type.Result.html" title="type fvm::kernel::Result">Result</a>&lt;<a class="struct" href="../prelude/struct.TokenAmount.html" title="struct fvm::kernel::prelude::TokenAmount">TokenAmount</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the total token supply in circulation at the beginning of the current epoch.
The circulating supply is the sum of:</p>
<ul>
<li>rewards emitted by the reward actor,</li>
<li>funds vested from lock-ups in the genesis state,
less the sum of:</li>
<li>funds burnt,</li>
<li>pledge collateral locked in storage miner actors (recorded in the storage power actor)</li>
<li>deal collateral locked by the storage market actor</li>
</ul>
</div></details></div><h2 id="object-safety" class="section-header">Object Safety<a href="#object-safety" class="anchor">§</a></h2><div class="object-safety-info">This trait is <b>not</b> <a href="https://doc.rust-lang.org/1.79.0/reference/items/traits.html#object-safety">object safe</a>.</div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-FilecoinKernel-for-DefaultFilecoinKernel%3CC%3E" class="impl"><a class="src rightside" href="../../../src/fvm/kernel/filecoin.rs.html#105-246">source</a><a href="#impl-FilecoinKernel-for-DefaultFilecoinKernel%3CC%3E" class="anchor">§</a><h3 class="code-header">impl&lt;C&gt; <a class="trait" href="trait.FilecoinKernel.html" title="trait fvm::kernel::filecoin::FilecoinKernel">FilecoinKernel</a> for <a class="struct" href="struct.DefaultFilecoinKernel.html" title="struct fvm::kernel::filecoin::DefaultFilecoinKernel">DefaultFilecoinKernel</a>&lt;C&gt;<div class="where">where
    C: <a class="trait" href="../../call_manager/trait.CallManager.html" title="trait fvm::call_manager::CallManager">CallManager</a>,
    <a class="struct" href="struct.DefaultFilecoinKernel.html" title="struct fvm::kernel::filecoin::DefaultFilecoinKernel">DefaultFilecoinKernel</a>&lt;C&gt;: <a class="trait" href="../trait.Kernel.html" title="trait fvm::kernel::Kernel">Kernel</a>,</div></h3></section></div><script src="../../../trait.impl/fvm/kernel/filecoin/trait.FilecoinKernel.js" async></script></section></div></main></body></html>